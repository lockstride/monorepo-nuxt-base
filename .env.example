# -- PLEASE READ --
# This is a sample .env file for the project. Copy it to .env and fill in the values.
# The .env file is used by the env-run tool to set environment variables. To provide
# environment-specific overrides, create a .env.${environment} file, where ${environment}
# is the name of the environment, e.g. dev-host, dev-docker, dev-e2e, etc.

# NEVER COMMIT .env and .env.${environment} FILES TO THE REPO, AND NEVER PLACE ANY SENSITIVE
# VALUES IN THIS FILE.

# -- INFISICAL --
# These are used by the Infisical client to authenticate and retrieve shared secrets.
# Values loaded from Infisical are used by the env-run tool to set environment variables.
# Infisical variables take precedence over .env values, and are managed via the Infisical
# web interface Dashboard, and can optionally be accessed via the Infisical CLI.
INFISICAL_PROJECT_ID=YOUR_INFISICAL_PROJECT_ID
INFISICAL_MACHINE_IDENTITY_CLIENT_ID=YOUR_INFISICAL_CLIENT_ID
INFISICAL_MACHINE_IDENTITY_CLIENT_SECRET=YOUR_INFISICAL_CLIENT_SECRET

# -- DATABASE --
# Override the default database URL when pointing to an external database. The default is the local
# Docker PostgreSQL: postgresql://postgres:postgres@127.0.0.1:5432/postgres?schema=public
# To change that default, update prisma.config.ts and /packages/data-sources/prisma/index.ts
#
# SUPABASE CONNECTION STRINGS
# Supabase provides two connection endpoints with different characteristics:
#
# 1. POOLED CONNECTION (port 6543) - via Supavisor connection pooler
#    Format: postgresql://postgres.{PROJECT}:{PASSWORD}@aws-1-{REGION}.pooler.supabase.com:6543/postgres
#    - Resolves to IPv4 (works from Docker containers)
#    - Uses transaction-mode pooling (efficient for high connection counts)
#    - Does NOT support: migrations, advisory locks, prepared statements
#    - Use for: application queries, seeding, dev-docker
#
# 2. DIRECT CONNECTION (port 5432) - direct to database server
#    Format: postgresql://postgres:{PASSWORD}@db.{PROJECT}.supabase.co:5432/postgres
#    - Resolves to IPv6 only (does NOT work from Docker's default bridge network)
#    - Full PostgreSQL feature support
#    - Use for: migrations (prisma migrate), schema changes
#    - Works from: host machine (dev-local), CI runners with IPv6 support
#
# IMPORTANT: URL-encode special characters in passwords (e.g., & becomes %26)
#
# For production deployments, DATABASE_URL must be set via environment or secrets manager.
#DATABASE_URL=postgresql://postgres.{PROJECT}:{PASSWORD}@aws-1-{REGION}.pooler.supabase.com:6543/postgres


# -- INTER-SERVICE COMMUNICATION --
# These variables configure how services communicate with each other (e.g., webapp -> api).
# On cloud platforms like Render, use external URLs. In Docker, use internal service names.
#
# INTEROP_API_DOMAIN: Base URL of the API service (include protocol)
#   - Render (free tier): https://api-xxx.onrender.com
#   - Render (paid, internal): http://api:10000
#   - Docker: http://api
#   - Local dev: http://127.0.0.1
#
# INTEROP_API_PORT: Port to reach the API service
#   - Render (free tier): 443 (HTTPS standard port)
#   - Render (paid, internal): 10000 (Render internal port)
#   - Docker/Local: 3001 (default API_PORT)
#
#INTEROP_API_DOMAIN=http://127.0.0.1
#INTEROP_API_PORT=3001

# -- Optional Overrides --
# There are many other environment variables that can be overridden in the base .env file, by
# environment-specific .env files, or by Infisical secrets, or by CLI overrides.
